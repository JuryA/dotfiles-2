#!/usr/bin/env python
import os
import datetime
from fsevents import Observer, Stream

h = os.environ["HOME"]

def backup(path):
    path = os.path.join(h, path)
    def cb(ev):
        os.system("rsync -az --delete %s myfreeweb@myfreeweb.strongspace.com:/strongspace/myfreeweb/home" % path.replace(' ', '\ '))
    observer = Observer()
    observer.schedule(Stream(cb, path, file_events=True))
    observer.start()

backup("Library/Application Support/TextExpander")
backup("Code/private")
backup("Documents/my.ledger")
