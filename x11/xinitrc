#!/bin/sh
export PATH=~/.local/bin:$PATH
export LC_ALL=en_US.UTF-8
export GTK_IM_MODULE=xim QT_IM_MODULE=xim XMODIFIERS="@im=none"

killall ssh-agent
rm -f ~/.ssh/ssh_auth_sock

. ~/.xinitrc.local
. ~/.fehbg
xsetroot -cursor_name left_ptr
xrdb ~/.Xresources &

xset r rate 300 35
setxkbmap 'us(colemak),ru' \
	-option ctrl:nocaps \
	-option ctrl:lctrl_meta \
	-option compose:ralt \
	-option grp:win_space_toggle \
	$XKB_OPTS
# Non-Mac keyboard: echo 'XKB_OPTS="-option altwin:swap_lalt_lwin"' >> ~/.xinitrc.local

if [ -x "`which xcape`" ]; then
	xcape -t 350 -e 'Control_L=Escape'
	xcape -t 350 -e 'Shift_L=Shift_L|9'
	xcape -t 350 -e 'Shift_R=Shift_R|0'
fi

sxhkd &
dunst &
unclutter &
xautolock -time 4 -corners -000 -locker "brightctl 0; xset dpms force off; slock; brightctl restore" &
compton -c -o 0.35 --vsync opengl --dbe --shadow-exclude 'n:e:gromit-mpx' &
exec bspwm
