# This came from Greg V's dotfiles:
#      https://github.com/myfreeweb/dotfiles
# Feel free to steal it, but attribution is nice
#
# thanks:
# http://pbrisbin.com/posts/mutt_gmail_offlineimap
# https://wiki.archlinux.org/index.php/OfflineIMAP
# vim: ft=cfg tw=0

[general]
accounts = WM, iCloud
ui = Basic
maxsyncaccounts = 1

[mbnames]
enabled = yes
filename = ~/.mailboxes.muttrc
header = "mailboxes "
peritem = "+%(accountname)s/%(foldername)s"
sep = " "
footer = "\n"

[Account WM]
postsynchook = notmuch new
localrepository = WM-Local
remoterepository = WM-Remote

[Repository WM-Local]
type = Maildir
localfolders = ~/Mail/WM
nametrans = lambda f: f if f == 'INBOX' else 'INBOX.' + f

[Repository WM-Remote]
type = IMAP
ssl = yes
cert_fingerprint = bb117fe204afd0523a6c3fa54bc22c3aec06fbb3
remotehost = mail.wm.ru
remoteuser = greg@wm.ru
remoteport = 993
realdelete = no
nametrans = lambda f: re.sub('^INBOX$', 'INBOX', re.sub('^INBOX\.', '', f))

[Account iCloud]
postsynchook = notmuch new
localrepository = iCloud-Local
remoterepository = iCloud-Remote

[Repository iCloud-Local]
type = Maildir
localfolders = ~/Mail/iCloud

[Repository iCloud-Remote]
type = IMAP
ssl = yes
cert_fingerprint = 98e4fcbda3e111db6ccd7d85ba85d35afa2cc8c5
remotehost = imap.mail.me.com
remoteuser = floatboth@me.com
remoteport = 993
realdelete = no
nametrans = lambda f: re.sub('^INBOX$', 'INBOX',
                      re.sub('^INBOX.', '', f))
